
{
    "entities": {
        "user": {
            "title": "User",
            "description": "Represents a user in the system, with a role.",
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "email": { "type": "string", "format": "email" },
                "avatar": { "type": "string", "format": "uri" },
                "role": { "type": "string", "enum": ["user", "student", "teacher", "sponsor", "admin", "developer"] }
            },
            "required": ["name", "email", "role"]
        },
        "userProfile": {
            "title": "User Profile",
            "description": "Represents a user's profile in the system.",
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "email": { "type": "string", "format": "email" },
                "avatar": { "type": "string", "format": "uri" },
                "role": { "type": "string", "enum": ["user", "student", "teacher", "sponsor", "admin", "developer"] },
                "postCount": { "type": "number" },
                "commentCount": { "type": "number" },
                "mute": { "type": "boolean", "description": "Command from a moderator to mute the user's mic." },
                "stopVideo": { "type": "boolean", "description": "Command from a moderator to stop the user's video." }
            },
            "required": ["name", "email", "role"]
        },
        "lesson": {
            "title": "Lesson",
            "description": "Represents a single lesson within a course module.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "title": { "type": "string" },
                "type": { "type": "string", "enum": ["video", "text", "quiz"] },
                "content": { "type": "string", "description": "Can be a video URL, markdown text, or a quiz ID." }
            },
            "required": ["id", "title", "type", "content"]
        },
        "module": {
            "title": "Module",
            "description": "Represents a module or section within a course.",
            "type": "object",
            "properties": {
                "id": { "type": "string" },
                "title": { "type": "string" },
                "lessons": {
                    "type": "array",
                    "items": { "$ref": "#/entities/lesson" }
                }
            },
            "required": ["id", "title", "lessons"]
        },
        "course": {
            "title": "Course",
            "description": "Represents an educational course.",
            "type": "object",
            "properties": {
                "title": { "type": "string" },
                "instructor": { "type": "string" },
                "instructorId": { "type": "string" },
                "instructorAvatar": { "type": "string", "format": "uri" },
                "thumbnail": { "type": "string", "format": "uri" },
                "rating": { "type": "number" },
                "students": { "type": "array", "items": { "type": "string" } },
                "progress": { "type": "object" },
                "price": { "type": "number" },
                "duration": { "type": "string" },
                "level": { "type": "string", "enum": ["Beginner", "Intermediate", "Advanced"] },
                "category": { "type": "string" },
                "description": { "type": "string" },
                "lessonsCount": { "type": "number" },
                "modules": {
                    "type": "array",
                    "items": { "$ref": "#/entities/module" }
                }
            },
            "required": ["title", "instructor", "instructorId", "thumbnail", "price", "level"]
        },
        "liveClass": {
            "title": "Live Class",
            "description": "Represents a live, scheduled class session.",
            "type": "object",
            "properties": {
                "title": { "type": "string" },
                "instructor": { "type": "string" },
                "instructorId": { "type": "string" },
                "course": { "type": "string" },
                "startTime": { "type": "string", "format": "date-time" },
                "duration": { "type": "number" },
                "attendees": { "type": "number" },
                "isLive": { "type": "boolean" }
            },
            "required": ["title", "instructor", "instructorId", "startTime", "duration"]
        },
        "chatMessage": {
            "title": "Chat Message",
            "description": "Represents a message in a live class chat.",
            "type": "object",
            "properties": {
                "text": { "type": "string" },
                "authorName": { "type": "string" },
                "authorAvatar": { "type": "string", "format": "uri" },
                "createdAt": { "type": "string", "format": "date-time" }
            },
            "required": ["text", "authorName", "createdAt"]
        },
        "achievement": {
            "title": "Achievement",
            "description": "Represents a badge or certificate earned by a user.",
            "type": "object",
            "properties": {
                "title": { "type": "string" },
                "description": { "type": "string" },
                "icon": { "type": "string" },
                "earnedAt": { "type": "string", "format": "date-time" },
                "type": { "type": "string", "enum": ["badge", "certificate"] }
            },
            "required": ["title", "earnedAt", "type"]
        },
        "communityPost": {
            "title": "Community Post",
            "description": "A post in the community forum.",
            "type": "object",
            "properties": {
                "title": { "type": "string" },
                "content": { "type": "string" },
                "authorId": { "type": "string" },
                "authorName": { "type": "string" },
                "authorAvatar": { "type": "string", "format": "uri" },
                "createdAt": { "type": "string", "format": "date-time" },
                "upvotes": { "type": "number" },
                "downvotes": { "type": "number" },
                "commentCount": { "type": "number" }
            },
            "required": ["title", "content", "authorId", "createdAt"]
        },
        "communityComment": {
            "title": "Community Comment",
            "description": "A comment on a community post.",
            "type": "object",
            "properties": {
                "postId": { "type": "string" },
                "content": { "type": "string" },
                "authorId": { "type": "string" },
                "authorName": { "type": "string" },
                "authorAvatar": { "type": "string", "format": "uri" },
                "createdAt": { "type": "string", "format": "date-time" },
                "upvotes": { "type": "number" },
                "downvotes": { "type": "number" }
            },
            "required": ["postId", "content", "authorId", "createdAt"]
        },
        "communityVote": {
            "title": "Community Vote",
            "description": "Represents a user's vote on a post or comment.",
            "type": "object",
            "properties": {
                "userId": { "type": "string" },
                "refId": { "type": "string" },
                "refType": { "type": "string", "enum": ["post", "comment"] },
                "direction": { "type": "string", "enum": ["up", "down"] }
            },
            "required": ["userId", "refId", "refType", "direction"]
        },
        "notification": {
            "title": "Notification",
            "description": "Represents a user notification.",
            "type": "object",
            "properties": {
                "title": { "type": "string" },
                "message": { "type": "string" },
                "type": { "type": "string", "enum": ["info", "success", "warning", "class"] },
                "timestamp": { "type": "string", "format": "date-time" },
                "read": { "type": "boolean" },
                "userId": { "type": "string" }
            },
            "required": ["title", "message", "type", "timestamp", "userId"]
        },
        "studyRoom": {
            "title": "Study Room",
            "description": "A virtual room for collaborative study.",
            "type": "object",
            "properties": {
                "name": { "type": "string" },
                "description": { "type": "string" },
                "createdBy": { "type": "string" },
                "creatorName": { "type": "string" },
                "createdAt": { "type": "string", "format": "date-time" },
                "participantCount": { "type": "number" }
            },
            "required": ["name", "createdBy", "creatorName", "createdAt"]
        }
    },
    "auth": {
        "providers": ["google.com", "password"]
    },
    "firestore": {
        "/users/{userId}": {
            "schema": { "$ref": "#/entities/userProfile" },
            "description": "Stores public profile information for each user."
        },
        "/courses": {
            "schema": { "$ref": "#/entities/course" },
            "description": "Collection of all available courses."
        },
        "/liveClasses/{classId}": {
            "schema": { "$ref": "#/entities/liveClass" },
            "description": "Collection of all live classes."
        },
        "/liveClasses/{classId}/messages": {
            "schema": { "$ref": "#/entities/chatMessage" },
            "description": "Sub-collection of chat messages for a specific live class."
        },
        "/liveClasses/{classId}/calls/{callId}": {
            "schema": { "type": "object" },
            "description": "Signaling document for WebRTC calls."
        },
        "/liveClasses/{classId}/participants/{participantId}": {
            "schema": { "$ref": "#/entities/userProfile" },
            "description": "Sub-collection of participants for a specific live class. Also used for moderation signals."
        },
        "/users/{userId}/achievements": {
            "schema": { "$ref": "#/entities/achievement" },
            "description": "Sub-collection of achievements for a specific user."
        },
        "/users/{userId}/notifications": {
            "schema": { "$ref": "#/entities/notification" },
            "description": "Sub-collection of notifications for a specific user."
        },
        "/communityPosts": {
            "schema": { "$ref": "#/entities/communityPost" },
            "description": "Top-level collection for all community forum posts."
        },
        "/communityPosts/{postId}/comments": {
            "schema": { "$ref": "#/entities/communityComment" },
            "description": "Sub-collection of comments for a specific community post."
        },
        "/votes": {
            "schema": { "$ref": "#/entities/communityVote" },
            "description": "Top-level collection for all votes to ensure atomic operations and easier querying."
        },
        "/studyRooms": {
            "schema": { "$ref": "#/entities/studyRoom" },
            "description": "Collection of all virtual study rooms."
        },
        "/studyRooms/{roomId}/messages": {
            "schema": { "$ref": "#/entities/chatMessage" },
            "description": "Sub-collection of chat messages for a specific study room."
        },
        "/studyRooms/{roomId}/calls/{callId}": {
            "schema": { "type": "object" },
            "description": "Signaling document for WebRTC calls."
        },
        "/studyRooms/{roomId}/participants/{participantId}": {
            "schema": { "$ref": "#/entities/userProfile" },
            "description": "Sub-collection of participants for a specific study room."
        }
    }
}
